# åƒé—®æ¨¡åž‹æŽ¨èæŠ¥å‘Š - åŸºäºŽç³»ç»Ÿèµ„æºåˆ†æž

## ðŸ“Š ç³»ç»Ÿèµ„æºåˆ†æž

### ç¡¬ä»¶é…ç½®

| ç»„ä»¶ | è§„æ ¼ | çŠ¶æ€ |
|------|------|------|
| **CPU** | Intel Core i5-8400 @ 2.80GHz | 6 æ ¸å¿ƒ (æ— è¶…çº¿ç¨‹) |
| **å†…å­˜** | 7.6GB æ€»é‡ | å¯ç”¨ 2.2GB (ä½¿ç”¨çŽ‡ 67%) |
| **Swap** | 2.0GB | å·²ä½¿ç”¨ 804MB |
| **å·²å®‰è£…æ¨¡åž‹** | qwen2.5:3b (1.9GB), qwen2.5:7b (4.7GB) | - |

### å½“å‰ CPU å ç”¨æƒ…å†µ

**Clawdbot è°ƒç”¨æ—¶çš„è¿›ç¨‹**:
```
ollama runner:     325% CPU (3.25 æ ¸å¿ƒ) - è¿è¡Œ qwen2.5:3b
clawdbot-gateway:  2.2% CPU
clawdbot-agent:    2.5% CPU (å·²åœæ­¢)
```

**æ€» CPU å ç”¨**: ~330% (çº¦ 3.3 æ ¸å¿ƒ / 6 æ ¸å¿ƒ = 55%)

**å…¶ä»–åŽå°è¿›ç¨‹**:
- Kiro Server: ~10% CPU
- FortiClient VPN: ~1.2% CPU
- å…¶ä»–ç³»ç»Ÿè¿›ç¨‹: ~5% CPU

**æ€»è®¡**: çº¦ **350-400% CPU** (3.5-4 æ ¸å¿ƒï¼Œå ç”¨çŽ‡ 58-67%)

---

## ðŸŽ¯ æ¨¡åž‹æŽ¨è

### â­â­â­â­â­ æŽ¨è 1: qwen2.5:1.5b (æœ€ä½³é€‰æ‹©)

**è§„æ ¼**:
- æ¨¡åž‹å¤§å°: ~1.0 GB
- å‚æ•°é‡: 1.5B
- é‡åŒ–: Q4_K_M (é»˜è®¤)
- ä¸Šä¸‹æ–‡çª—å£: 32K tokens

**æ€§èƒ½é¢„ä¼°**:
- CPU å ç”¨: ~150-200% (1.5-2 æ ¸å¿ƒ)
- å†…å­˜å ç”¨: ~1.2-1.5 GB
- å“åº”é€Ÿåº¦: 3-5 ç§’
- è´¨é‡: é€‚åˆç®€å•å¯¹è¯å’ŒæŸ¥è¯¢

**ä¼˜ç‚¹**:
- âœ… CPU å ç”¨ä½Žï¼Œç•™æœ‰å……è¶³ä½™é‡
- âœ… å†…å­˜å ç”¨å°ï¼Œä¸ä¼šè§¦å‘ swap
- âœ… å“åº”é€Ÿåº¦å¿«
- âœ… é€‚åˆ Clawdbot çš„å¤šå±‚æž¶æž„å¼€é”€
- âœ… å¯ä»¥åŒæ—¶è¿è¡Œå…¶ä»–åº”ç”¨

**ç¼ºç‚¹**:
- âš ï¸ å¤æ‚æŽ¨ç†èƒ½åŠ›è¾ƒå¼±
- âš ï¸ é•¿æ–‡æœ¬ç†è§£æœ‰é™

**å®‰è£…å‘½ä»¤**:
```bash
ollama pull qwen2.5:1.5b
```

**é…ç½® Clawdbot**:
```bash
# æ›´æ–°é…ç½®
cat > ~/.clawdbot/clawdbot.json << 'EOF'
{
  "models": {
    "providers": {
      "ollama": {
        "baseUrl": "http://127.0.0.1:11434/v1",
        "apiKey": "ollama-local",
        "api": "openai-completions",
        "models": {
          "qwen2.5:1.5b": {
            "contextWindow": 32768,
            "maxTokens": 327680
          }
        }
      }
    }
  },
  "agents": {
    "defaults": {
      "model": {
        "primary": "ollama/qwen2.5:1.5b"
      },
      "maxConcurrent": 1,
      "subagents": {
        "maxConcurrent": 1
      }
    }
  }
}
EOF
```

**é€‚ç”¨åœºæ™¯**:
- âœ… ç®€å•é—®ç­”
- âœ… ä»£ç è§£é‡Š
- âœ… æ–‡æ¡£æŸ¥è¯¢
- âœ… æ—¥å¸¸å¯¹è¯
- âœ… éœ€è¦å¿«é€Ÿå“åº”çš„åœºæ™¯

---

### â­â­â­â­ æŽ¨è 2: qwen2.5:3b (å½“å‰ä½¿ç”¨)

**è§„æ ¼**:
- æ¨¡åž‹å¤§å°: 1.9 GB
- å‚æ•°é‡: 3B
- é‡åŒ–: Q4_K_M
- ä¸Šä¸‹æ–‡çª—å£: 32K tokens

**æ€§èƒ½å®žæµ‹**:
- CPU å ç”¨: ~325% (3.25 æ ¸å¿ƒ)
- å†…å­˜å ç”¨: ~2.2 GB
- å“åº”é€Ÿåº¦: 8.7 ç§’ (Ollama ç›´æŽ¥è°ƒç”¨)
- è´¨é‡: è‰¯å¥½ï¼Œé€‚åˆå¤§å¤šæ•°ä»»åŠ¡

**ä¼˜ç‚¹**:
- âœ… å·²å®‰è£…ï¼Œæ— éœ€ä¸‹è½½
- âœ… æ€§èƒ½å’Œè´¨é‡å¹³è¡¡è¾ƒå¥½
- âœ… å¯ä»¥å¤„ç†ä¸­ç­‰å¤æ‚åº¦ä»»åŠ¡
- âœ… ç›´æŽ¥ä½¿ç”¨ Ollama å“åº”å¿«

**ç¼ºç‚¹**:
- âš ï¸ CPU å ç”¨è¾ƒé«˜ (55%)
- âš ï¸ é€šè¿‡ Clawdbot è°ƒç”¨æ—¶æ€§èƒ½å·®
- âš ï¸ å†…å­˜å ç”¨æŽ¥è¿‘å¯ç”¨ä¸Šé™
- âš ï¸ å¯èƒ½è§¦å‘ swap

**é€‚ç”¨åœºæ™¯**:
- âœ… ä¸­ç­‰å¤æ‚åº¦é—®ç­”
- âœ… ä»£ç ç”Ÿæˆå’Œè°ƒè¯•
- âœ… æ–‡æ¡£ç†è§£
- âš ï¸ å»ºè®®ç›´æŽ¥ä½¿ç”¨ Ollama CLI

---

### â­â­â­ æŽ¨è 3: qwen2.5:0.5b (è¶…è½»é‡)

**è§„æ ¼**:
- æ¨¡åž‹å¤§å°: ~0.4 GB
- å‚æ•°é‡: 0.5B
- é‡åŒ–: Q4_K_M
- ä¸Šä¸‹æ–‡çª—å£: 32K tokens

**æ€§èƒ½é¢„ä¼°**:
- CPU å ç”¨: ~80-120% (0.8-1.2 æ ¸å¿ƒ)
- å†…å­˜å ç”¨: ~0.6-0.8 GB
- å“åº”é€Ÿåº¦: 1-3 ç§’
- è´¨é‡: åŸºç¡€ï¼Œé€‚åˆç®€å•ä»»åŠ¡

**ä¼˜ç‚¹**:
- âœ… CPU å ç”¨æžä½Ž
- âœ… å†…å­˜å ç”¨æžå°
- âœ… å“åº”é€Ÿåº¦æžå¿«
- âœ… é€‚åˆèµ„æºå—é™çŽ¯å¢ƒ

**ç¼ºç‚¹**:
- âŒ æŽ¨ç†èƒ½åŠ›æœ‰é™
- âŒ å¤æ‚ä»»åŠ¡è¡¨çŽ°å·®
- âŒ å¯èƒ½äº§ç”Ÿä¸å‡†ç¡®å›žç­”

**å®‰è£…å‘½ä»¤**:
```bash
ollama pull qwen2.5:0.5b
```

**é€‚ç”¨åœºæ™¯**:
- âœ… æžç®€å•é—®ç­”
- âœ… å…³é”®è¯æå–
- âœ… ç®€å•åˆ†ç±»
- âš ï¸ ä¸é€‚åˆå¤æ‚æŽ¨ç†

---

### â­â­ ä¸æŽ¨è: qwen2.5:7b (å½“å‰å·²å®‰è£…)

**è§„æ ¼**:
- æ¨¡åž‹å¤§å°: 4.7 GB
- å‚æ•°é‡: 7B
- é‡åŒ–: Q4_K_M
- ä¸Šä¸‹æ–‡çª—å£: 32K tokens

**æ€§èƒ½é¢„ä¼°**:
- CPU å ç”¨: ~450-500% (4.5-5 æ ¸å¿ƒ)
- å†…å­˜å ç”¨: ~4.5-5 GB
- å“åº”é€Ÿåº¦: 15-25 ç§’
- è´¨é‡: ä¼˜ç§€

**ä¸ºä»€ä¹ˆä¸æŽ¨è**:
- âŒ CPU å ç”¨è¿‡é«˜ (75-83%)
- âŒ å†…å­˜å ç”¨è¿‡é«˜ï¼Œå¿…ç„¶è§¦å‘ swap
- âŒ å“åº”é€Ÿåº¦æ…¢
- âŒ ç³»ç»Ÿä¼šå˜å¾—å¡é¡¿
- âŒ æ— æ³•åŒæ—¶è¿è¡Œå…¶ä»–åº”ç”¨

**å»ºè®®**: å¸è½½ä»¥èŠ‚çœç£ç›˜ç©ºé—´
```bash
ollama rm qwen2.5:7b
```

---

## ðŸ“Š æ¨¡åž‹å¯¹æ¯”è¡¨

| æ¨¡åž‹ | å¤§å° | CPU å ç”¨ | å†…å­˜å ç”¨ | å“åº”é€Ÿåº¦ | è´¨é‡ | æŽ¨èåº¦ |
|------|------|----------|----------|----------|------|--------|
| **qwen2.5:0.5b** | 0.4GB | 80-120% | 0.6-0.8GB | 1-3ç§’ | â­â­ | â­â­â­ |
| **qwen2.5:1.5b** | 1.0GB | 150-200% | 1.2-1.5GB | 3-5ç§’ | â­â­â­ | â­â­â­â­â­ |
| **qwen2.5:3b** | 1.9GB | 325% | 2.2GB | 8.7ç§’ | â­â­â­â­ | â­â­â­â­ |
| **qwen2.5:7b** | 4.7GB | 450-500% | 4.5-5GB | 15-25ç§’ | â­â­â­â­â­ | â­â­ |

---

## ðŸŽ¯ æœ€ç»ˆæŽ¨è

### åœºæ™¯ 1: é€šè¿‡ Clawdbot è°ƒç”¨ (æŽ¨è)

**æŽ¨èæ¨¡åž‹**: **qwen2.5:1.5b**

**ç†ç”±**:
1. Clawdbot å¤šå±‚æž¶æž„æœ‰é¢å¤–å¼€é”€ï¼ˆGateway + Agent Runnerï¼‰
2. éœ€è¦ç•™å‡º CPU å’Œå†…å­˜ä½™é‡
3. 1.5b æ¨¡åž‹åœ¨ Clawdbot ä¸­çš„å®žé™…ä½“éªŒä¼šæ¯” 3b å¥½
4. å“åº”é€Ÿåº¦æ›´å¿«ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½

**é…ç½®æ­¥éª¤**:
```bash
# 1. å®‰è£…æ¨¡åž‹
ollama pull qwen2.5:1.5b

# 2. æµ‹è¯•æ¨¡åž‹
ollama run qwen2.5:1.5b "ä½ å¥½"

# 3. æ›´æ–° Clawdbot é…ç½®
# (ä½¿ç”¨ä¸Šé¢çš„é…ç½®ç¤ºä¾‹)

# 4. é‡å¯ Gateway
clawdbot gateway stop
clawdbot gateway start

# 5. æµ‹è¯•
clawdbot agent --agent main --message "æµ‹è¯•" --thinking low
```

---

### åœºæ™¯ 2: ç›´æŽ¥ä½¿ç”¨ Ollama CLI (å½“å‰æ–¹æ¡ˆ)

**æŽ¨èæ¨¡åž‹**: **qwen2.5:3b** (å·²å®‰è£…)

**ç†ç”±**:
1. ç›´æŽ¥è°ƒç”¨æ— é¢å¤–å¼€é”€
2. å“åº”é€Ÿåº¦å¯æŽ¥å— (8.7ç§’)
3. è´¨é‡è¾ƒå¥½
4. å·²å®‰è£…ï¼Œæ— éœ€ä¸‹è½½

**ä½¿ç”¨æ–¹å¼**:
```bash
ollama run qwen2.5:3b "ä½ çš„é—®é¢˜"
```

---

### åœºæ™¯ 3: éœ€è¦æ›´å¥½çš„è´¨é‡

**æŽ¨è**: å‡çº§ç¡¬ä»¶æˆ–ä½¿ç”¨äº‘æœåŠ¡

**é€‰é¡¹**:
1. **å‡çº§å†…å­˜åˆ° 16GB**: å¯ä»¥æµç•…è¿è¡Œ qwen2.5:7b
2. **ä½¿ç”¨äº‘ API**: OpenAI, Anthropic, æˆ–å›½å†…çš„é€šä¹‰åƒé—® API
3. **ä½¿ç”¨è¿œç¨‹ Ollama**: åœ¨æ›´å¼ºå¤§çš„æœºå™¨ä¸Šè¿è¡Œ Ollama

---

## ðŸ”§ ä¼˜åŒ–å»ºè®®

### 1. æ¸…ç†ä¸éœ€è¦çš„æ¨¡åž‹

```bash
# å¸è½½ 7b æ¨¡åž‹ï¼ˆå¦‚æžœä¸ç”¨ï¼‰
ollama rm qwen2.5:7b

# æŸ¥çœ‹ç£ç›˜å ç”¨
du -sh ~/.ollama/models/
```

### 2. ä¼˜åŒ– Clawdbot é…ç½®

```json
{
  "agents": {
    "defaults": {
      "maxConcurrent": 1,        // é™ä½Žå¹¶å‘
      "subagents": {
        "maxConcurrent": 1       // é™ä½Žå­ agent å¹¶å‘
      },
      "timeoutSeconds": 120      // å¢žåŠ è¶…æ—¶æ—¶é—´
    }
  }
}
```

### 3. å…³é—­ä¸å¿…è¦çš„åŽå°ç¨‹åº

```bash
# æ£€æŸ¥ CPU å ç”¨
ps aux --sort=-%cpu | head -10

# è€ƒè™‘å…³é—­ï¼š
# - ä¸å¿…è¦çš„æµè§ˆå™¨æ ‡ç­¾
# - ä¸ä½¿ç”¨çš„ IDE æ‰©å±•
# - åŽå°æ›´æ–°ç¨‹åº
```

### 4. ä½¿ç”¨ Ollama çš„å¹¶å‘é™åˆ¶

```bash
# è®¾ç½® Ollama çŽ¯å¢ƒå˜é‡
export OLLAMA_NUM_PARALLEL=1
export OLLAMA_MAX_LOADED_MODELS=1

# é‡å¯ Ollama
sudo systemctl restart ollama
```

---

## ðŸ“ å®žæ–½è®¡åˆ’

### ç«‹å³æ‰§è¡Œï¼ˆæŽ¨èï¼‰

```bash
# 1. å®‰è£… qwen2.5:1.5b
ollama pull qwen2.5:1.5b

# 2. æµ‹è¯•æ€§èƒ½
time ollama run qwen2.5:1.5b "ä»€ä¹ˆæ˜¯ MSTP åè®®ï¼Ÿ"

# 3. å¦‚æžœæ»¡æ„ï¼Œæ›´æ–° Clawdbot é…ç½®
# 4. å¸è½½ qwen2.5:7b èŠ‚çœç©ºé—´
ollama rm qwen2.5:7b
```

### å¤‡é€‰æ–¹æ¡ˆ

å¦‚æžœ 1.5b è´¨é‡ä¸æ»¡æ„ï¼š
```bash
# ç»§ç»­ä½¿ç”¨ 3bï¼Œä½†åªé€šè¿‡ Ollama CLI
ollama run qwen2.5:3b "ä½ çš„é—®é¢˜"
```

---

## ðŸŽ‰ æ€»ç»“

**æœ€ä½³é€‰æ‹©**: **qwen2.5:1.5b**

**ç†ç”±**:
1. âœ… CPU å ç”¨åˆç† (25-33%)
2. âœ… å†…å­˜å ç”¨å®‰å…¨ (ä¸è§¦å‘ swap)
3. âœ… å“åº”é€Ÿåº¦å¿« (3-5ç§’)
4. âœ… é€‚åˆ Clawdbot çš„å¤šå±‚æž¶æž„
5. âœ… å¯ä»¥åŒæ—¶è¿è¡Œå…¶ä»–åº”ç”¨
6. âœ… è´¨é‡è¶³å¤Ÿåº”å¯¹å¤§å¤šæ•°æ—¥å¸¸ä»»åŠ¡

**æ¬¡é€‰**: **qwen2.5:3b** (ç›´æŽ¥ä½¿ç”¨ Ollama CLI)

**ä¸æŽ¨è**: **qwen2.5:7b** (èµ„æºä¸è¶³ï¼Œä¼šå¯¼è‡´ç³»ç»Ÿå¡é¡¿)

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

- Ollama æ¨¡åž‹åº“: https://ollama.com/library/qwen2.5
- Clawdbot é…ç½®: `~/.clawdbot/clawdbot.json`
- æ€§èƒ½åˆ†æž: `~/clawdbot-performance-analysis.md`
- Bug ä¿®å¤: `~/bug-fix-summary.md`
